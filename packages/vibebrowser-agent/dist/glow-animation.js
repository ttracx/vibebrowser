(()=>{"use strict";(()=>{const n="nxtscape-glow-overlay",e="nxtscape-glow-styles",t="nxtscape-glow-initialized",o="nxtscape-glow-enabled";function i(){a(),function(){if(document.getElementById(e))return;const t=document.createElement("style");t.id=e,t.textContent=`\n      @keyframes nxtscape-glow-pulse {\n        0% {\n          box-shadow:\n            inset 0 0 58px 26px transparent,\n            inset 0 0 50px 22px rgba(251, 102, 24, 0.06),\n            inset 0 0 42px 18px rgba(251, 102, 24, 0.12),\n            inset 0 0 34px 14px rgba(251, 102, 24, 0.18);\n        }\n        50% {\n          box-shadow:\n            inset 0 0 72px 35px transparent,\n            inset 0 0 64px 32px rgba(251, 102, 24, 0.10),\n            inset 0 0 54px 26px rgba(251, 102, 24, 0.18),\n            inset 0 0 46px 22px rgba(251, 102, 24, 0.24);\n        }\n        100% {\n          box-shadow:\n            inset 0 0 58px 26px transparent,\n            inset 0 0 50px 22px rgba(251, 102, 24, 0.06),\n            inset 0 0 42px 18px rgba(251, 102, 24, 0.12),\n            inset 0 0 34px 14px rgba(251, 102, 24, 0.18);\n        }\n      }\n\n      @keyframes nxtscape-glow-fade-in {\n        from { opacity: 0; }\n        to { opacity: 0.6; }\n      }\n\n      #${n} {\n        position: fixed !important;\n        top: 0 !important;\n        left: 0 !important;\n        width: 100% !important;\n        height: 100% !important;\n        pointer-events: none !important;\n        z-index: 2147483647 !important;\n        opacity: 0;\n        will-change: opacity;\n        animation:\n          nxtscape-glow-pulse 3s ease-in-out infinite,\n          nxtscape-glow-fade-in 420ms cubic-bezier(0.22, 1, 0.36, 1) forwards !important;\n      }\n    `,document.head.appendChild(t)}();const t=document.createElement("div");t.id=n,document.body.appendChild(t)}function a(){const e=document.getElementById(n);e&&e.remove()}window[t]||(window[t]=!0,chrome.runtime.onMessage.addListener((n,e,t)=>{if("GlowAnimationService"===n.source){switch(n.action){case"startGlow":return new Promise(n=>{try{chrome.storage?.local?.get(o,e=>{const t=!e||!Object.prototype.hasOwnProperty.call(e,o)||!1!==e[o];n(t)})}catch(e){n(!0)}}).then(n=>{n&&i(),t({success:!0,skipped:!n})}),!0;case"stopGlow":a(),t({success:!0});break;default:t({success:!1,error:"Unknown action"})}return!0}}),window.addEventListener("beforeunload",a),document.addEventListener("visibilitychange",()=>{document.hidden&&a()}))})()})();
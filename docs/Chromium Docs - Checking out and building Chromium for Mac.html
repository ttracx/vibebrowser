<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Chromium Docs - Checking out and building Chromium for Mac</title><link rel="stylesheet" type="text/css" href="/+static/base.css"/><link rel="stylesheet" type="text/css" href="/+static/doc.css"/><link rel="stylesheet" type="text/css" href="/+static/prettify/prettify.css"/><!-- default customHeadTagPart --></head><body class="Site"><header class="Site-header Site-header--withNavbar"><div class="Header"><div class="Header-title"><a class="Header-anchor" href="README.md"><img class="Header-anchorLogo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC8AAAAvCAYAAABzJ5OsAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QUMFCsbdMBtZgAAC5BJREFUaN61mnuQVNWdxz+/c+6dBw3D8EYgAUZgCKu8Aj7IJqIkGBhApIxJzKM2u+5uiFCJRneju5va2t38YW1idIO1JtnNppIqK1ipgKKS0lIs1gfGUXRA5eHAmAhBQWGYRz/uPee3f9zume6enpke4t6qO3379um+n9/3/B7nMcIFHmPX7afz0SUA3PDP7c2x86ujmGVedZ73TAcagUAhRjknwgkRjoRWWgMrT+741zmHABrWtXL+0WUXxCAj/cLqOw7zxL83s+m7R5six23O6V9ETlNxDCKghYba/6KavFFNTmMhtNJjjfy8JpR7dn1v7rGrbz3Enh/OHxGLqbbhii1vApCqt0vX3Xn0uZ6Mtvdm/S3ZSFPeJ+CDKlT0oQioh2ykqZ6Mv6Wr17V/+vYjz4+qM0sBlm9+48NXfv2db6YwwfZcRIv3eSUpVbRMdND+6xL1K/SOMUJNwGOh5fO7727u+dOV/+QLAFx31+ENsTfdmZy2+GLKEnXLwIdQp9I975V0Vlt6s3Rf+3eHNwCwct+FwS+7eT/875Wsv/PNezM5/7BzZfICUgGj/I5WcJ3B3Qtip3Sn/cOfuf3wvTxzBYtuPjgyt1n2l6/Q+rOlrP/OG49ks6xXk0cVgwokfwpg2meT6uBug2o+eIdo0+eCSdv6WrPr6R80b1h080Fe+69LqoD/86fh2WtouePgI9mI9SKCiKAi+dam5GtaLXze70va6EBXK8ADeIX6Wtm15575G7j6edizYnjl19z22r2R55tg8t0tJOr3vwcpCdgBwThEuhwMvv93tKRNXY25b88Pm781rPLXfnP/dU7ZqZgkCMXmWwkYQVRQSYz4sLJNv4EV4POQNVaue+a++Y9UhF97dxcdT/82NW1uU7di8qGcV7qgtggUwPMGDeUypapqFQYWtS3rQSNgjIxOZ11P64//rDTbPP73Y1h104btBpcoqv1yqNeip2iijFZKjJUzTUHJAelUqy9ATsGpbi+A97X52gMZIu+WjhtlXu7t7OTogWOEdfWogGCSVsYgCEpBffLXUqJ6LlbiXMyURkt9rZDNOd4/l8UawVpT2bryoC2gSWkPChBIvLR5Zt3+bd9e0G/g1/+797nAygpjDO2vHqSnJ8aENfnYFASD5l8xCbiI6XtQLudYu3wU1y4fzaK5KazJGyWgXnnr7S5eOvABL71+ljC0iEncTwSMTYQRaxAMxiTxZUQwVjAmaW+MIYp173f/qukqAJnwtTNctbCuado4216wzscRbXtbCepTSFiTFCMpBCogJm8Q5GLhivkhd31pCvV1AeqVMABrIBdDTQDOQxSDGCGbdTz05Ena38kQBCaByseSMWCMwQYWG1iMtYmBSD72kkefOht99JGXev8gAH/90/SPakK2FHvce8c7OPWH97A1dWBDxAioSTIOBjWQjZQtGxr5/KqJ5HKeyMHD+5Xn3xKOn1ZiD1Zg9iRhxVxl4xIhtBAEhmf3f8BTL3dSG1qCMMCGAUEQJL0g9KfkfKCIycMjxLHe+61NE2+VxGXS3daQKo4EI0Lb3t/h1WBqapCgJnHBvOqxg29sGMcNKydgRNndBg/sUYrdWrU0DXoPm1cJay5VYi+8fLib1nZN3ATyPdAPbCRxejHSPyAxgno6N7c0NsrGH/Q0TxtvDlWqVl1nznDs9Q7EJgZgwkQRY1g2t5a7N38U9Z4f74HHXlNCO7BalmeXyMG6xfD1q8Gr8OiLPZzq7Pf/QiLoF176XKegvBjhj2fji824lKzuU6c4vQFjp0xh1JjaxN+jGFyMokRZx11fuYhczrO7rXpwgNDCrldhdxs4p6xaUo8CNjB5PzcEgSEILGEQEOT9PzkDgtASBJaJjbWrjTEsKx/lFt4655i5YA4uTqC9iyF2rL2ygVRdQOQSVxkWvOy3QwvbnlIiBzWB0DzdEgYJtA2DItgE2AYJcBBYxAaItYShXWZEZF5xiS8/w7pRTJw6IQ+kZHIRn72sAe+Vh/cnPj4seIVqaw3seCW5efFUixpbBJkEr7UWa5KzOLXmC16zEZg+ZJVUZca82ag61AsuVhbNSREG8PxbUtZ2ePDi6vjsUQgDmDbeoCoYa7E2cZ0ku0hJqdXS7083CuOGmyQowoymGah6po4PsVawBo6f7icbCrxcjMJHx08rQZK8GF1f3YSl6Gg0CKFWCNhyhokfmUZYY6mrNagmBSh2paNEHab0l48WYwfZOLkRWir24qA6KKFRJaoEW26Mc55ZH5tFd2+MSFI5CzldRwBefAQGaoPEB5wf8SpMZFT1nA6cnlY86hoaSWsN3iclf/YkGQg9DHhx6myaLMQ+eXZvTkaiOqp6zqB6onQKNsTpPbM/NptX3uwkimHFXB18YjEMuCp8Ym4y5jlzXhFjqgPvZz1hvHKkcomqfK+2LuTVkyFiYOMSwbshhraDgBfG59cvTVym432DrXb5K/99r3rE5GL/8vC2akmX7vt9HdkoCbLNq4TIDVR7KPDIwZZVySAtdnD8fVu1u/Q5fKyt5t0z2SercpmiuLAGfvEcBFZZc6mybnECVEntSuAblsDaRWCt8Lt2LZnQVDHJAoETpzNP5GdS3b1hYOpHEuqxhy9cDp+al1TLx9vg/qeSa6mQfVQTV9mySli7KMkuL7zRw8lMI4Xlw2pVz8X+/M3X1I0Nki7wPw8Ds3kk8IGBB/clC1Ar5yufWQArm4Udr8BzR+HYaSV2SbumycIn5iY+nuRz4bEXO3m3N8WYMSMDVyCK/P8ASOrGdpbMGTV3QdPYI6qDr/YWf1bcxbGHpTPhqyuUmiA/HgoS6Gyc5PG4MJMSyETKT37bzYkzEZcvnjpAdR0iSAuftR06N/PXez/4fR/ql7ed31dfG1zOCIJeynLRJ+fBFU3QNEmTcXneYK/Q/kfHs4cinm7LEGUybLpmOr5sqbQa8Ewm3vu3q0dd1bd6cO0/ncQbs2zWjIaXdJj1cK0iFgRhfArqQiUTwenznlxvL4EocRQzf7rl4lnjqwYvvnzr7fMLe9LxgXv+Zmrp8shN/9H5+Kj6cA1/wlEpa7hcDpeLcC5Gs2mu//RHyEU6YvCe3mjnNz6bun7AEvfCrR08s++dG53zFwRcacmvz6WcR9XjYsfyBY1kLwDcOa8/+82hL3717o7+pFG4aPvRLIDuM5e8t2nKpNG/GQ624NPVZArvHaqehlrHjGkN5CI/InCAd8/0tLT+5OOZ1qE2F3bdNXnHuc70tmS1qChgytSt5B6VBmkJuJJJR1x+yQRykR906F0JXET44Gz6+3d+bsLu4XdGNh7n17dP2NrdnX4ckZLV20qjnsGg+7ZrYof3nlmTA0alagcP+EHAOzvTO269buwdtBysYltn52zm3/I2v7p1fEtXV5EBw2UarTyydHFELpNj6YLxOK8jBt+6rmHTjd/rgMcuqW5P6tD9M5m/uYPtt41vOXu2Z9uQsFq2iVASqA7vHJfOrhuQ08sNLh8HnX6/+/tb1zVsuvHfOnjoH2ZdwFbmxmOws4m1/3Jq46QJqR02sMMJVxLVcS6LS3ez4VMXkYu1qsCMIqen3u1q+cebJu+m5WBFxUe8Dzv5hv2jV14586HRqdo1WsVE2buYbG+ay+bUMGFCqv9Bg9mgyvmu7M6fPvj6F9sevDLzoe6AT54yrvuhb49f2378zPLenuyLQ80b1Ss+dowJY6ZNHZOAV5oiSjKE7urO7n390HsLt65ruH7xwmmZapmqhj94f+J3oqZ1+23jrjjwxsl5XV29/5nN5NLF+6yqyUpbJpPjsgVjyeV82YJLkgDS6dz5s2d773th3zszt6wdc1VvTg8A/OI7M////nGicKS+cIyeXzUBcNnWowsuuqhhdW1t8HER5vnYTZ+SisYsbh4XeK85VT3nlRPO+cPpdNTa3nHuiQduv7gdYOZXDvH2L+dfEMP/AV1sNY2UPKgqAAAAAElFTkSuQmCC" alt="project logo"/><span class="Header-anchorTitle">Chromium Docs</span></a></div></div><nav class="Header-nav" role="navigation"><ul><li><a href="README.md">Home</a></li><li><a href="README.md#document-index">Sitemap</a></li><li><a href="contributing.md">Getting Started</a></li><li><a href="testing/testing_in_chromium.md">Testing</a></li><li><a href="design/README.md">Design Docs</a></li><li><a href="https://www.chromium.org/contact/">Contact</a></li><li><a href="https://www.chromium.org/for-testers/bug-reporting-guidelines/">Bugs</a></li><li><a href="https://chromium.googlesource.com/chromium/src/+/main/styleguide/styleguide.md">Style Guide</a></li><li><a href="https://gerrit.googlesource.com/gitiles/+/HEAD/Documentation/markdown.md">Markdown Syntax</a></li><li><a href="https://www.chromium.org/Home/">Old Docs</a></li><li><a href="https://source.chromium.org/chromium/chromium/src/+/main:docs/">Search</a></li></ul></nav></header><div class="Site-content Site-Content--markdown"><div class="Container"><div class="doc"><h1><a class="h" name="Checking-out-and-building-Chromium-for-Mac" href="#Checking-out-and-building-Chromium-for-Mac"><span></span></a><a class="h" name="checking-out-and-building-chromium-for-mac" href="#checking-out-and-building-chromium-for-mac"><span></span></a>Checking out and building Chromium for Mac</h1><p>There are instructions for other platforms linked from the <a href="get_the_code.md">get the code</a> page.</p><h2><a class="h" name="Instructions-for-Google-Employees" href="#Instructions-for-Google-Employees"><span></span></a><a class="h" name="instructions-for-google-employees" href="#instructions-for-google-employees"><span></span></a>Instructions for Google Employees</h2><p>Are you a Google employee? See <a href="https://goto.google.com/building-chrome">go/building-chrome</a> instead.</p><div class="toc" role="navigation"><h2>Contents</h2><div class="toc-aux"><ul><li><a href="#Instructions-for-Google-Employees">Instructions for Google Employees</a></li><li><a href="#System-requirements">System requirements</a></li><li><a href="#Install">Install</a></li><li><a href="#Get-the-code">Get the code</a></li><li><a href="#Setting-up-the-build">Setting up the build</a></li><ul><li><a href="#Faster-builds">Faster builds</a></li></ul><li><a href="#Build-Chromium">Build Chromium</a></li><li><a href="#Run-Chromium">Run Chromium</a></li><li><a href="#Avoiding-system-permissions-dialogs-after-each-build">Avoiding system permissions dialogs after each build</a></li><li><a href="#Build-and-run-test-targets">Build and run test targets</a></li><li><a href="#Debugging">Debugging</a></li><li><a href="#Update-your-checkout">Update your checkout</a></li><li><a href="#Tips_tricks_and-troubleshooting">Tips, tricks, and troubleshooting</a></li><ul><li><a href="#Using-Xcode_Ninja-Hybrid">Using Xcode-Ninja Hybrid</a></li><li><a href="#Improving-performance-of-git-commands">Improving performance of git commands</a></li><li><a href="#Xcode-license-agreement">Xcode license agreement</a></li><li><a href="#Exclude-checkout-from-Spotlight-indexing">Exclude checkout from Spotlight indexing</a></li></ul></ul></div></div><h2><a class="h" name="System-requirements" href="#System-requirements"><span></span></a><a class="h" name="system-requirements" href="#system-requirements"><span></span></a>System requirements</h2><ul><li><p>A Mac, Intel or Arm. (<a href="https://chromium.googlesource.com/chromium/src.git/+/main/docs/mac_arm64.md">More details about Arm Macs</a>.)</p></li><li><p><a href="https://developer.apple.com/xcode/">Xcode</a>. Xcode comes with...</p></li><li><p>The macOS SDK. Run</p><pre class="code"><span class="pln">$ ls </span><span class="str">`xcode-select -p`</span><span class="pun">/</span><span class="typ">Platforms</span><span class="pun">/</span><span class="typ">MacOSX</span><span class="pun">.</span><span class="pln">platform</span><span class="pun">/</span><span class="typ">Developer</span><span class="pun">/</span><span class="typ">SDKs</span><span class="pln">
</span></pre><p>to check whether you have it, and what version you have. <code class="code">mac_sdk_official_version</code> in <a href="/chromium/src/+/main/build/config/mac/mac_sdk.gni">mac_sdk.gni</a> is the SDK version used on all the bots and for <a href="https://source.chromium.org/search?q=MAC_BINARIES_LABEL&amp;ss=chromium">official builds</a>, so that version is guaranteed to work. Building with a newer SDK usually works too (please fix or file a bug if it doesn&#39;t).</p><p>Building with an older SDK might also work, but if it doesn&lsquo;t then we won&rsquo;t accept changes for making it work.</p><p>The easiest way to get the newest SDK is to use the newest version of Xcode, which often requires using the newest version of macOS. We don&lsquo;t use Xcode itself much, so if you&rsquo;re know what you&#39;re doing, you can likely get the build working with an older version of macOS as long as you get a new version of the macOS SDK on it.</p></li><li><p>An APFS-formatted volume (this is the default format for macOS volumes).</p></li></ul><h2><a class="h" name="Install" href="#Install"><span></span></a><a class="h" name="install" href="#install"><span></span></a>Install <code class="code">depot_tools</code></h2><p>Clone the <code class="code">depot_tools</code> repository:</p><pre class="code"><span class="pln">$ git clone https</span><span class="pun">:</span><span class="com">//chromium.googlesource.com/chromium/tools/depot_tools.git</span><span class="pln">
</span></pre><p>Add <code class="code">depot_tools</code> to the end of your PATH (you will probably want to put this in your <code class="code">~/.bash_profile</code> or <code class="code">~/.zshrc</code>). Assuming you cloned <code class="code">depot_tools</code> to <code class="code">/path/to/depot_tools</code> (note: you <strong>must</strong> use the absolute path or Python will not be able to find infra tools):</p><pre class="code"><span class="pln">$ </span><span class="kwd">export</span><span class="pln"> PATH</span><span class="pun">=</span><span class="str">&quot;$PATH:/path/to/depot_tools&quot;</span><span class="pln">
</span></pre><h2><a class="h" name="Get-the-code" href="#Get-the-code"><span></span></a><a class="h" name="get-the-code" href="#get-the-code"><span></span></a>Get the code</h2><p>Create a <code class="code">chromium</code> directory for the checkout and change to it (you can call this whatever you like and put it wherever you like, as long as the full path has no spaces):</p><pre class="code"><span class="pln">$ mkdir chromium </span><span class="pun">&amp;&amp;</span><span class="pln"> cd chromium
</span></pre><p>Run the <code class="code">fetch</code> tool from <code class="code">depot_tools</code> to check out the code and its dependencies.</p><pre class="code"><span class="pln">$ caffeinate fetch chromium
</span></pre><p>Running the <code class="code">fetch</code> with <code class="code">caffeinate</code> is optional, but it will prevent the system from sleeping for the duration of the <code class="code">fetch</code> command, which may run for a considerable amount of time.</p><p>If you don&#39;t need the full repo history, you can save time by using <code class="code">fetch --no-history chromium</code>. You can call <code class="code">git fetch --unshallow</code> to retrieve the full history later.</p><p>Expect the command to take 30 minutes on even a fast connection, and many hours on slower ones.</p><p>When <code class="code">fetch</code> completes, it will have created a hidden <code class="code">.gclient</code> file and a directory called <code class="code">src</code> in the working directory. The remaining instructions assume you have switched to the <code class="code">src</code> directory:</p><pre class="code"><span class="pln">$ cd src
</span></pre><p><em>Optional</em>: You can also <a href="https://www.chromium.org/developers/how-tos/api-keys">install API keys</a> if you want your build to talk to some Google services, but this is not necessary for most development and testing purposes.</p><h2><a class="h" name="Setting-up-the-build" href="#Setting-up-the-build"><span></span></a><a class="h" name="setting-up-the-build" href="#setting-up-the-build"><span></span></a>Setting up the build</h2><p>Chromium uses <a href="https://ninja-build.org">Ninja</a> as its main build tool along with a tool called <a href="https://gn.googlesource.com/gn/+/main/docs/quick_start.md">GN</a> to generate <code class="code">.ninja</code> files. You can create any number of <em>build directories</em> with different configurations. To create a build directory:</p><pre class="code"><span class="pln">$ gn gen </span><span class="kwd">out</span><span class="pun">/</span><span class="typ">Default</span><span class="pln">
</span></pre><ul><li>You only have to run this once for each new build directory, Ninja will update the build files as needed.</li><li>You can replace <code class="code">Default</code> with another name, but it should be a subdirectory of <code class="code">out</code>.</li><li>For other build arguments, including release settings, see <a href="https://www.chromium.org/developers/gn-build-configuration">GN build configuration</a>. The default will be a debug component build matching the current host operating system and CPU.</li><li>For more info on GN, run <code class="code">gn help</code> on the command line or read the <a href="https://gn.googlesource.com/gn/+/main/docs/quick_start.md">quick start guide</a>.</li><li>Building Chromium for arm Macs requires <a href="mac_arm64.md">additional setup</a>.</li></ul><h3><a class="h" name="Faster-builds" href="#Faster-builds"><span></span></a><a class="h" name="faster-builds" href="#faster-builds"><span></span></a>Faster builds</h3><p>Full rebuilds are about the same speed in Debug and Release, but linking is a lot faster in Release builds.</p><p>Put</p><pre class="code">is_debug = false
</pre><p>in your <code class="code">args.gn</code> to do a release build.</p><p>Put</p><pre class="code">is_component_build = true
</pre><p>in your <code class="code">args.gn</code> to build many small dylibs instead of a single large executable. This makes incremental builds much faster, at the cost of producing a binary that opens less quickly. Component builds work in both debug and release.</p><p>Put</p><pre class="code">symbol_level = 0
</pre><p>in your args.gn to disable debug symbols altogether.  This makes both full rebuilds and linking faster (at the cost of not getting symbolized backtraces in gdb).</p><h4><a class="h" name="Use-Reclient" href="#Use-Reclient"><span></span></a><a class="h" name="use-reclient" href="#use-reclient"><span></span></a>Use Reclient</h4><p>In addition, Google employees should use Reclient, a distributed compilation system. Detailed information is available internally but the relevant gn arg is:</p><ul><li><code class="code">use_remoteexec = true</code></li></ul><p>Google employees can visit <a href="https://goto.google.com/building-chrome-mac#using-remote-execution">go/building-chrome-mac#using-remote-execution</a> for more information. For external contributors, Reclient does not support Mac builds.</p><h4><a class="h" name="CCache" href="#CCache"><span></span></a><a class="h" name="ccache" href="#ccache"><span></span></a>CCache</h4><p>You might also want to <a href="ccache_mac.md">install ccache</a> to speed up the build.</p><h2><a class="h" name="Build-Chromium" href="#Build-Chromium"><span></span></a><a class="h" name="build-chromium" href="#build-chromium"><span></span></a>Build Chromium</h2><p>Build Chromium (the &ldquo;chrome&rdquo; target) with Ninja using the command:</p><pre class="code"><span class="pln">$ autoninja </span><span class="pun">-</span><span class="pln">C </span><span class="kwd">out</span><span class="pun">/</span><span class="typ">Default</span><span class="pln"> chrome
</span></pre><p>(<code class="code">autoninja</code> is a wrapper that automatically provides optimal values for the arguments passed to <code class="code">ninja</code>.)</p><p>You can get a list of all of the other build targets from GN by running <code class="code">gn ls out/Default</code> from the command line. To compile one, pass the GN label to Ninja with no preceding &ldquo;//&rdquo; (so, for <code class="code">//chrome/test:unit_tests</code> use <code class="code">autoninja -C out/Default chrome/test:unit_tests</code>).</p><p>See <a href="/chromium/src/+/main/siso_tips.md">Siso tips</a> too.</p><h2><a class="h" name="Run-Chromium" href="#Run-Chromium"><span></span></a><a class="h" name="run-chromium" href="#run-chromium"><span></span></a>Run Chromium</h2><p>Once it is built, you can simply run the browser:</p><pre class="code"><span class="pln">$ </span><span class="kwd">out</span><span class="pun">/</span><span class="typ">Default</span><span class="pun">/</span><span class="typ">Chromium</span><span class="pun">.</span><span class="pln">app</span><span class="pun">/</span><span class="typ">Contents</span><span class="pun">/</span><span class="typ">MacOS</span><span class="pun">/</span><span class="typ">Chromium</span><span class="pln">
</span></pre><h2><a class="h" name="Avoiding-system-permissions-dialogs-after-each-build" href="#Avoiding-system-permissions-dialogs-after-each-build"><span></span></a><a class="h" name="avoiding-system-permissions-dialogs-after-each-build" href="#avoiding-system-permissions-dialogs-after-each-build"><span></span></a>Avoiding system permissions dialogs after each build</h2><p>Every time you start a new developer build, you may get two system dialogs: <code class="code">Chromium wants to use your confidential information stored in &quot;Chromium Safe Storage&quot; in your keychain.</code>, and <code class="code">Do you want the application &quot;Chromium.app&quot; to accept incoming network connections?</code>.</p><p>To avoid them, you can run Chromium with these command-line flags (but of course beware that they will change the behavior of certain subsystems):</p><pre class="code"><span class="pun">--</span><span class="kwd">use</span><span class="pun">-</span><span class="pln">mock</span><span class="pun">-</span><span class="pln">keychain </span><span class="pun">--</span><span class="pln">disable</span><span class="pun">-</span><span class="pln">features</span><span class="pun">=</span><span class="typ">DialMediaRouteProvider</span><span class="pln">
</span></pre><h2><a class="h" name="Build-and-run-test-targets" href="#Build-and-run-test-targets"><span></span></a><a class="h" name="build-and-run-test-targets" href="#build-and-run-test-targets"><span></span></a>Build and run test targets</h2><p>Tests are split into multiple test targets based on their type and where they exist in the directory structure. To see what target a given unit test or browser test file corresponds to, the following command can be used:</p><pre class="code"><span class="pln">$ gn refs </span><span class="kwd">out</span><span class="pun">/</span><span class="typ">Default</span><span class="pln"> </span><span class="pun">--</span><span class="pln">testonly</span><span class="pun">=</span><span class="kwd">true</span><span class="pln"> </span><span class="pun">--</span><span class="pln">type</span><span class="pun">=</span><span class="pln">executable </span><span class="pun">--</span><span class="pln">all chrome</span><span class="pun">/</span><span class="pln">browser</span><span class="pun">/</span><span class="pln">ui</span><span class="pun">/</span><span class="pln">browser_list_unittest</span><span class="pun">.</span><span class="pln">cc
</span><span class="com">//chrome/test:unit_tests</span><span class="pln">
</span></pre><p>In the example above, the target is unit_tests. The unit_tests binary can be built by running the following command:</p><pre class="code"><span class="pln">$ autoninja </span><span class="pun">-</span><span class="pln">C </span><span class="kwd">out</span><span class="pun">/</span><span class="typ">Default</span><span class="pln"> unit_tests
</span></pre><p>You can run the tests by running the unit_tests binary. You can also limit which tests are run using the <code class="code">--gtest_filter</code> arg, e.g.:</p><pre class="code"><span class="pln">$ </span><span class="kwd">out</span><span class="pun">/</span><span class="typ">Default</span><span class="pun">/</span><span class="pln">unit_tests </span><span class="pun">--</span><span class="pln">gtest_filter</span><span class="pun">=</span><span class="str">&quot;BrowserListUnitTest.*&quot;</span><span class="pln">
</span></pre><p>You can find out more about GoogleTest at its <a href="https://github.com/google/googletest">GitHub page</a>.</p><h2><a class="h" name="Debugging" href="#Debugging"><span></span></a><a class="h" name="debugging" href="#debugging"><span></span></a>Debugging</h2><p>Good debugging tips can be found <a href="mac/debugging.md">here</a>.</p><h2><a class="h" name="Update-your-checkout" href="#Update-your-checkout"><span></span></a><a class="h" name="update-your-checkout" href="#update-your-checkout"><span></span></a>Update your checkout</h2><p>To update an existing checkout, you can run</p><pre class="code"><span class="pln">$ git rebase</span><span class="pun">-</span><span class="pln">update
$ gclient sync
</span></pre><p>The first command updates the primary Chromium source repository and rebases any of your local branches on top of tip-of-tree (aka the Git branch <code class="code">origin/main</code>). If you don&#39;t want to use this script, you can also just use <code class="code">git pull</code> or other common Git commands to update the repo.</p><p>The second command syncs dependencies to the appropriate versions and re-runs hooks as needed.</p><h2><a class="h" name="Tips_tricks_and-troubleshooting" href="#Tips_tricks_and-troubleshooting"><span></span></a><a class="h" name="tips_tricks_and-troubleshooting" href="#tips_tricks_and-troubleshooting"><span></span></a>Tips, tricks, and troubleshooting</h2><h3><a class="h" name="Using-Xcode_Ninja-Hybrid" href="#Using-Xcode_Ninja-Hybrid"><span></span></a><a class="h" name="using-xcode_ninja-hybrid" href="#using-xcode_ninja-hybrid"><span></span></a>Using Xcode-Ninja Hybrid</h3><p>While using Xcode is unsupported, GN supports a hybrid approach of using Ninja for building, but Xcode for editing and driving compilation.  Xcode is still slow, but it runs fairly well even <strong>with indexing enabled</strong>.  Most people build in the Terminal and write code with a text editor, though.</p><p>With hybrid builds, compilation is still handled by Ninja, and can be run from the command line (e.g. <code class="code">autoninja -C out/gn chrome</code>) or by choosing the <code class="code">chrome</code> target in the hybrid project and choosing Build.</p><p>To use Xcode-Ninja Hybrid pass <code class="code">--ide=xcode</code> to <code class="code">gn gen</code>:</p><pre class="code"><span class="pln">$ gn gen </span><span class="kwd">out</span><span class="pun">/</span><span class="pln">gn </span><span class="pun">--</span><span class="pln">ide</span><span class="pun">=</span><span class="pln">xcode
</span></pre><p>Open it:</p><pre class="code"><span class="pln">$ open </span><span class="kwd">out</span><span class="pun">/</span><span class="pln">gn</span><span class="pun">/</span><span class="pln">all</span><span class="pun">.</span><span class="pln">xcodeproj
</span></pre><p>You may run into a problem where <a href="http://YES">http://YES</a> is opened as a new tab every time you launch Chrome. To fix this, open the scheme editor for the Run scheme, choose the Options tab, and uncheck &ldquo;Allow debugging when using document Versions Browser&rdquo;. When this option is checked, Xcode adds <code class="code">--NSDocumentRevisionsDebugMode YES</code> to the launch arguments, and the <code class="code">YES</code> gets interpreted as a URL to open.</p><p>If you have problems building, join us in <code class="code">#chromium</code> on <code class="code">irc.freenode.net</code> and ask there. Be sure that the <a href="https://build.chromium.org/buildbot/waterfall/">waterfall</a> is green and the tree is open before checking out. This will increase your chances of success.</p><h3><a class="h" name="Improving-performance-of-git-commands" href="#Improving-performance-of-git-commands"><span></span></a><a class="h" name="improving-performance-of-git-commands" href="#improving-performance-of-git-commands"><span></span></a>Improving performance of git commands</h3><h4><a class="h" name="Increase-the-vnode-cache-size" href="#Increase-the-vnode-cache-size"><span></span></a><a class="h" name="increase-the-vnode-cache-size" href="#increase-the-vnode-cache-size"><span></span></a>Increase the vnode cache size</h4><p><code class="code">git status</code> is used frequently to determine the status of your checkout.  Due to the large number of files in Chromium&lsquo;s checkout, <code class="code">git status</code> performance can be quite variable.  Increasing the system&rsquo;s vnode cache appears to help. By default, this command:</p><pre class="code"><span class="pln">$ sysctl </span><span class="pun">-</span><span class="pln">a </span><span class="pun">|</span><span class="pln"> egrep </span><span class="str">&#39;kern\..*vnodes&#39;</span><span class="pln">
</span></pre><p>Outputs <code class="code">kern.maxvnodes: 263168</code> (263168 is 257 * 1024).  To increase this setting:</p><pre class="code"><span class="pln">$ sudo sysctl kern</span><span class="pun">.</span><span class="pln">maxvnodes</span><span class="pun">=</span><span class="pln">$</span><span class="pun">((</span><span class="lit">512</span><span class="pun">*</span><span class="lit">1024</span><span class="pun">))</span><span class="pln">
</span></pre><p>Higher values may be appropriate if you routinely move between different Chromium checkouts.  This setting will reset on reboot.  To apply it at startup:</p><pre class="code"><span class="pln">$ sudo tee </span><span class="pun">/</span><span class="typ">Library</span><span class="pun">/</span><span class="typ">LaunchDaemons</span><span class="pun">/</span><span class="pln">kern</span><span class="pun">.</span><span class="pln">maxvnodes</span><span class="pun">.</span><span class="pln">plist </span><span class="pun">&gt;</span><span class="pln"> </span><span class="str">/dev/</span><span class="kwd">null</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln">EOF
</span><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">&quot;1.0&quot;</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">&quot;UTF-8&quot;</span><span class="pun">?&gt;</span><span class="pln">
</span><span class="pun">&lt;!</span><span class="pln">DOCTYPE plist PUBLIC </span><span class="str">&quot;-//Apple//DTD PLIST 1.0//EN&quot;</span><span class="pln"> </span><span class="str">&quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;</span><span class="pun">&gt;</span><span class="pln">
</span><span class="pun">&lt;</span><span class="pln">plist version</span><span class="pun">=</span><span class="str">&quot;1.0&quot;</span><span class="pun">&gt;</span><span class="pln">
  </span><span class="str">&lt;dict&gt;</span><span class="pln">
    </span><span class="str">&lt;key&gt;</span><span class="typ">Label</span><span class="pun">&lt;/</span><span class="pln">key</span><span class="pun">&gt;</span><span class="pln">
      </span><span class="str">&lt;string&gt;</span><span class="pln">kern</span><span class="pun">.</span><span class="pln">maxvnodes</span><span class="pun">&lt;/</span><span class="kwd">string</span><span class="pun">&gt;</span><span class="pln">
    </span><span class="str">&lt;key&gt;</span><span class="typ">ProgramArguments</span><span class="pun">&lt;/</span><span class="pln">key</span><span class="pun">&gt;</span><span class="pln">
      </span><span class="str">&lt;array&gt;</span><span class="pln">
        </span><span class="str">&lt;string&gt;</span><span class="pln">sysctl</span><span class="pun">&lt;/</span><span class="kwd">string</span><span class="pun">&gt;</span><span class="pln">
        </span><span class="str">&lt;string&gt;</span><span class="pln">kern</span><span class="pun">.</span><span class="pln">maxvnodes</span><span class="pun">=</span><span class="lit">524288</span><span class="pun">&lt;/</span><span class="kwd">string</span><span class="pun">&gt;</span><span class="pln">
      </span><span class="pun">&lt;/</span><span class="pln">array</span><span class="pun">&gt;</span><span class="pln">
    </span><span class="str">&lt;key&gt;</span><span class="typ">RunAtLoad</span><span class="pun">&lt;/</span><span class="pln">key</span><span class="pun">&gt;</span><span class="pln">
      </span><span class="pun">&lt;</span><span class="kwd">true</span><span class="pun">/&gt;</span><span class="pln">
  </span><span class="pun">&lt;/</span><span class="pln">dict</span><span class="pun">&gt;</span><span class="pln">
</span><span class="pun">&lt;/</span><span class="pln">plist</span><span class="pun">&gt;</span><span class="pln">
EOF
</span></pre><p>Or edit the file directly.</p><h4><a class="h" name="Configure-git-to-use-an-untracked-cache" href="#Configure-git-to-use-an-untracked-cache"><span></span></a><a class="h" name="configure-git-to-use-an-untracked-cache" href="#configure-git-to-use-an-untracked-cache"><span></span></a>Configure git to use an untracked cache</h4><p>Try running</p><pre class="code"><span class="pln">$ git update</span><span class="pun">-</span><span class="pln">index </span><span class="pun">--</span><span class="pln">test</span><span class="pun">-</span><span class="pln">untracked</span><span class="pun">-</span><span class="pln">cache
</span></pre><p>If the output ends with <code class="code">OK</code>, then the following may also improve performance of <code class="code">git status</code>:</p><pre class="code"><span class="pln">$ git config core</span><span class="pun">.</span><span class="pln">untrackedCache </span><span class="kwd">true</span><span class="pln">
</span></pre><h4><a class="h" name="Configure-git-to-use-fsmonitor" href="#Configure-git-to-use-fsmonitor"><span></span></a><a class="h" name="configure-git-to-use-fsmonitor" href="#configure-git-to-use-fsmonitor"><span></span></a>Configure git to use fsmonitor</h4><p>You can significantly speed up git by using <a href="https://github.blog/2022-06-29-improve-git-monorepo-performance-with-a-file-system-monitor/">fsmonitor.</a> You should enable fsmonitor in large repos, such as Chromium and v8. Enabling it globally will launch many processes and probably isn&#39;t worthwhile. Be sure you have at least version 2.43 (fsmonitor on the Mac is broken before then). The command to enable fsmonitor in the current repo is:</p><pre class="code"><span class="pln">$ git config core</span><span class="pun">.</span><span class="pln">fsmonitor </span><span class="kwd">true</span><span class="pln">
</span></pre><h3><a class="h" name="Xcode-license-agreement" href="#Xcode-license-agreement"><span></span></a><a class="h" name="xcode-license-agreement" href="#xcode-license-agreement"><span></span></a>Xcode license agreement</h3><p>If you&#39;re getting the error</p><blockquote><p>Agreeing to the Xcode/iOS license requires admin privileges, please re-run as root via sudo.</p></blockquote><p>the Xcode license hasn&#39;t been accepted yet which (contrary to the message) any user can do by running:</p><pre class="code"><span class="pln">$ xcodebuild </span><span class="pun">-</span><span class="pln">license
</span></pre><p>Only accepting for all users of the machine requires root:</p><pre class="code"><span class="pln">$ sudo xcodebuild </span><span class="pun">-</span><span class="pln">license
</span></pre><h3><a class="h" name="Exclude-checkout-from-Spotlight-indexing" href="#Exclude-checkout-from-Spotlight-indexing"><span></span></a><a class="h" name="exclude-checkout-from-spotlight-indexing" href="#exclude-checkout-from-spotlight-indexing"><span></span></a>Exclude checkout from Spotlight indexing</h3><p>Chromium&#39;s checkout contains a lot of files, and building generates many more. Spotlight will try to index all of those files, and uses a lot of CPU time doing so, especially during a build, which can slow things down.</p><p>To prevent the Chromium checkout from being indexed by Spotlight, open System Preferences, go to &ldquo;Spotlight&rdquo; -&gt; &ldquo;Privacy&rdquo; and add your Chromium checkout directory to the list of excluded locations.</p></div></div></div><!-- default customFooter --><footer class="Site-footer"><div class="Footer"><span class="Footer-poweredBy">Powered by <a href="https://gerrit.googlesource.com/gitiles/">Gitiles</a>| <a href="https://policies.google.com/privacy">Privacy</a>| <a href="https://policies.google.com/terms">Terms</a></span><div class="Footer-links"><a class="Footer-link" href="/chromium/src/+show/main/docs/mac_build_instructions.md">source</a><a class="Footer-link" href="/chromium/src/+log/main/docs/mac_build_instructions.md">log</a><a class="Footer-link" href="/chromium/src/+blame/main/docs/mac_build_instructions.md">blame</a></div></div></footer><script nonce="UmZK0gzpSTHjW1gPEwIlcw">window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date; ga('create', 'UA-55762617-15', 'auto'); ga('send', 'pageview', {title: 'Checking out and building Chromium for Mac'});</script><script async src="https://www.google-analytics.com/analytics.js" nonce="UmZK0gzpSTHjW1gPEwIlcw"></script></body></html>